<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <base target="_blank" />
    <meta charset="UTF-8">
    <meta http-equiv="content-type" content="text/html;charset=utf-8">
    <meta name="referrer" content="never">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

    <link rel="shortcut icon" href="https://img1.doubanio.com/view/group/sqxs/public/105835b9c5e3089.jpg" type="image/x-icon" />
    <link href="https://spin.js.org/spin.css" type="text/css" rel="stylesheet">

    <title>üéàÊ¨¢ËøéÊù•Áé©Ôºå‰ª•ÈπÖ‰º†ÈπÖÔºÅËüπËüπ„ÄÇÁà±‰Ω†‰ª¨ÔΩû </title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:100,300,400,500,700,900">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@mdi/font@latest/css/materialdesignicons.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Material+Icons">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/vuetify@2.0.0/dist/vuetify.min.css">


<style>
[v-cloak]{
    display: none;
}
a,a *{
	color: gray;
	text-decoration: none;
}
.v-list-item__title,.time{
    font-size:0.8rem;
}
.v-application--wrap{
    max-width: 100vw;
    width: 100vw;
}
.author-container{
    display:inline-flex;
    flex-direction: row;
    font-size:0.7rem;
}

.card-container{
	display: grid;
	grid-auto-flow: column;
	grid-template-columns: repeat(3,33%);
    max-width: 100%;
    width:100vw;
}
.card-container .v-card{ 
    max-width: 100%;
    flex: 1 1 auto;
    width:100%;
}  
.v-toolbar__title{
   font-size:1rem;
   margin: 0 1rem;
}
.hit{
    border-radius: 1rem;
    margin: 0 0.5rem;
} 
section.row1{
    width:100vw;
    max-width: 100%;
}

@media (max-width: 1000px) {
    .card-container{
        grid-auto-flow: row;
        grid-template-columns: auto;
    }
    .card-container .v-card{
       max-width:100%;
       flex: 1 1 auto;
       width: 100vw;
    }

}

</style>
</head>
<body>
    
</body>

<div id="app">
    <v-app id="inspire" class="card-container">

        <section class="row1">
            <p></p>
            <p><a href="//weread.qing.workers.dev">üéàüéà</a>Ê¨¢ËøéÊù•Áé©Ôºå‰ª•ÈπÖ‰º†ÈπÖÔºÅËüπËüπ„ÄÇÁà±‰Ω†‰ª¨ÔΩû üéàüéà</p>
            <p></p>
        </section>

        <section class="row1 card-container">
        <v-card  class="mx-auto" v-for="(items,i) in washed" :key="i">
            <v-toolbar color="green" dark>
                <!--
                <v-app-bar-nav-icon></v-app-bar-nav-icon>
                -->


                <a :href="to_csv(items)" :download="names[i]+'_'+today()+'.csv'">
                    <v-avatar>
                      <img :src="logo[i]" alt="avatar">
                    </v-avatar>                
                </a>

                <a :href="to_csv(items1[i])" :download="names[i]+'_all_'+today()+'.csv'">
                    <v-toolbar-title class="white--text">{{ names[i] }}</v-toolbar-title>
               </a>

                <v-spacer></v-spacer>
                <!--
                <v-btn icon>
                    <v-icon>search</v-icon>
                </v-btn>
                <v-btn icon>
                    <v-icon>check_circle</v-icon>
                </v-btn>
                -->
            </v-toolbar>

            <v-list two-line>
                <v-list-item-group v-model="selected" multiple active-class="green--text">
                    <template v-for="(item, index) in items">
                        <v-list-item :key="item.title">
                            <template v-slot:default="{ active, toggle }">

                                <v-list-item-content>
                                    <a :href="item.url">
                                        <v-list-item-title v-text="item.title" :title="item.title"></v-list-item-title>
                                        <!--v-list-item-subtitle class="text-primary" v-text="item.author"> </v-list-item-subtitle-->
                                    </a>
                                    <v-list-item-subtitle class="time"  v-text="item.time"></v-list-item-subtitle>
                                </v-list-item-content>

                                <v-list-item-action style="" class="author-container">
                                    <a :href="item.author_u">
                                        <v-list-item-action-text v-text="item.author"></v-list-item-action-text>
                                    </a>

                                    <v-list-item-action-text class="hit lime white--text" v-text="item.hit"></v-list-item-action-text>
                                    <!--
                                    <v-icon v-if="!active" color="grey lighten-1">
                                        thumb_up
                                    </v-icon>

                                    <v-icon v-if="!active" color="grey lighten-1">
                                        thumb_down
                                    </v-icon>

                                    <v-icon v-if="!active" color="grey lighten-1">
                                        star_border
                                    </v-icon>

                                    <v-icon v-else color="yellow">
                                        star
                                    </v-icon>
                                    -->
                                </v-list-item-action>
                            </template>
                        </v-list-item>

                        <v-divider v-if="index + 1 < items.length" :key="index"></v-divider>
                    </template>
                </v-list-item-group>
            </v-list>
        </v-card>


        </section>
        <!--
        <section class="row">
          <v-card>
            <v-container fluid grid-list-xl >
              <v-layout align-center wrap >
                <v-flex xs12 sm12> 
                    <v-select v-model="wash1" :items="wash1" attach chips label="Ê¥ó" multiple ></v-select> 
                </v-flex>
              </v-layout>
            </v-container>
          </v-card>        
        </section>
        -->
    </v-app>
</div>

<script src="https://cdn.jsdelivr.net/npm/babel-polyfill/dist/polyfill.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
<script src="https://cdn.jsdelivr.net/npm/vuetify@2.0.0/dist/vuetify.min.js"></script>
<script src="https://cdn.bootcss.com/ramda/0.26.1/ramda.min.js"></script>
<script src="https://cdn.bootcss.com/lodash.js/4.17.15/lodash.min.js"></script>
<script src="https://cdn.bootcss.com/localforage/1.7.3/localforage.min.js"></script>
<script src="https://cdn.bootcss.com/moment.js/2.24.0/moment.min.js"></script>


<script>
    const get_json=u=>fetch(u).then(x=>x.json())
    default_item=()=>( { 
          time: '07-24 12:13',
          url: 'https://www.douban.com/group/topic/146541191/',
          title: 'Ë°•‰∫ÜËøáÊúüÁ≥ñÁöÑÊàëÁé∞Âú®Âú®ÁàÜÂì≠ÔºÅÔºÅÊàëÊòØÊúÄÂêé‰∏Ä‰∏™Áü•ÈÅìÂ∞è...',
          author_u: 'https://www.douban.com/people/45858462/',
          author: 'Ê≤âÈªòÁöÑÂ∞èÁéã',
          hit: '111'
    })

const mycache=(k="douban",v=null)=>v ? localforage.setItem(k,v) : k ? localforage.getItem(k) :localforage.keys() 
const
wash=["101","Yamy","bdjw","cxk","gay","lgbt","tf","wyb","‰∏ÅÂ≠êÂ≥ª","‰∏âÂ∞èÂè™","‰∏ú‰∏ú","‰∏ΩÈ¢ñ","‰πùÂ∑û","‰∫éÂ¶à","‰∫éÊ≠£","‰∫≤ÁÉ≠","‰∫≤Áà±","ËúúÊ±Å","‰ΩüÂπ¥","ÂÄ™Â¶Æ","ÂÇÖËèÅ","ÂÖ®ËÅå","ÂÖ≥ÊôìÂΩ§","ÂÖ≥Êô∫Â®¨","Âá∫ËΩ®","ÂàòÂÆ™Âçé","ÂàòÊÅ∫Â®Å","ÂàòÈõØ","ÂêåÊÄß","Âê¥‰∫¶Âá°","Âê¥ÂÆ£‰ª™","ÂïÜË®Ä","ÂõõÂ≠ó","‰∏âÂ≠ó","‰∫åÂ≠ó","Â§ßs","Â•≥Âõ¢","Â•∂Ëå∂","Â¨õ","Â≠üÁæéÂ≤ê","ÂÆÅÊ≥ΩÊ∂õ","ÂÆãÁ•ñÂÑø","ÂÆ∏Ê±ê","Â∞ès","Â∞è‰∏â","Â∞è‰∏Ω","Â∏ùÂõΩ","Âº†Â∫≠","Âº†Á¥´ÂÆÅ","Âº†Èõ™Ëøé","Âº†Èúá","Âº∫‰∏ú","ÂæêÊ¢¶Ê¥Å","ÂæêÁíê","ÂøÉÂ¶Ç","ÊÉÖÊ∑±Ê∑±","Êó•Êú¨","ÊòìÁÉäÂçÉÁé∫","ÊôöÊôö","ÊôöÁ∫¢","Êô®ÂÆá","Êú±‰∏ÄÈæô","ÊùéÂ∞èÁíê","ÊùéÊòìÂ≥∞","ÊùéÊôü","ÊùéÊ∫™ËäÆ","ÊùéÁé∞","ÊùéÁ¥´Â©∑","Êù®ÂπÇ","Êù®Á¥´","Êù®Ëä∏Êô¥","Êù®Ë∂ÖË∂ä","ÊûóÂøóÁé≤","ÊÆµÂ••Â®ü","ÊØõÊôìÂΩ§","Ê±üÁñèÂΩ±","Ê≤àÊúà","Ê≥´ÈõÖ","ÊΩòÁéÆÊüè","ÁÅ´ÁÆ≠Â∞ëÂ•≥","ÁÉ≠Â∑¥","ÁÉ≠Êêú","ÁÉ≠Áà±","Áà±Ë±Ü","Áéã‰øäÂáØ","ÁéãÊ∫ê","ÁªøËå∂","ËÄΩÁæé","ËÇñ","ËÖê","Ëâ∫ÂÖ¥","Ëî°ÂæêÂù§","Ë¥æ‰πÉ‰∫Æ","ËµñÁæé‰∫ë","ËΩ¶","ÈÇì‰º¶","ÈÉΩÁÅµ","ÈáëÊòü","ÈòøÈõÖ","ÈôàÊÉÖ","Èõ™Ê¢®","Èõ™Ëéâ","Èúâ","Èü©","Èü©Â∫ö","È¢ñÂÑø","ÈπøÊôó","ÈªÑÊüèÈíß","üåü","È¶ôËúú","Áé∞Áé∞","ÂòâÂ∞î","‰∫ëÁÜô","ÊûÅÈÄüÂâçËøõ","ËàíÊ∑á","‰∏ÄÂçö","sm","Á¥´Á¥´","Â≠ê‰πâ","ÁôΩÂÆá","ÈáëÈ∫¶","‰ªäÈ∫¶","ÁÜπ","ËÆ∏ÂáØ"] 
const today=()=>moment().format("YYYYMMDD") 
const to_blob=(d)=>{
    //let blob=new Blob([JSON.stringify(d, null, 2)], {type : 'application/json'});
    let blob=new Blob([d], {type : 'application/json'});
    return URL.createObjectURL(blob);
}
const to_csv=(d=[])=>{
    let k=""
    let d1=""
    if (d.length>0) {
        k=Object.keys(d[0]).join(",")+"\n"
        d1=d.map(y=>Object.values(y).join(",")).join("\n")
    }
    return to_blob(k+d1)
}
const render=(items)=>(
        new Vue({
            el: '#app',
            vuetify: new Vuetify(),
            methods:{
                to_csv,
                today,
            },
            computed:{
                washed(x){
                    let re=new RegExp(this.wash.join("|"),"i")
                    return this.items1.map(y=>y
                        .filter(x=>!re.test(x.title))
                        .sort((b,a)=>a.hit-b.hit)
                    )
                }
            },
            data: () => ({
                selected: [],
                items1:items,
                wash,
                wash1:[...wash],
                names:["ÈπÖ‰ª¨Ê†ñÊÅØÂú∞","ÈπÖÁªÑ","Ëá™Áî±ÂêÉÁìúÂü∫Âú∞"],
                logo:["https://img1.doubanio.com/view/group/sqxs/public/105835b9c5e3089.jpg","https://img3.doubanio.com/view/group/sqxs/public/580e4e9f613dd6d.jpg","https://img3.doubanio.com/view/group/sqxs/public/1c0a5162bddf475.jpg"],
            }),
        })
)

    const render_cache=async()=>{
        let data=(await mycache("douban"))||[]
        return render(data)
    }
   const render_net=async(u)=>{
            let {ok,data}=await get_json(u)
            if (!ok) return
            mycache("douban",data)
            let items=ok ? data :[]
            render(items)
    }
    const render_net1=async(u)=>{
            let {ok,data}=await get_json(u)
            if (!ok) return
            let items=ok ? data :[]
            render(items)
    }
    const init=async ()=>{
        let u=["/list","/list2"]
        Promise.race([render_cache(),render_net1(u[0]),render_net(u[1])])
    }
    init()
   </script>



<script type="text/javascript" src="http://tjs.sjs.sinajs.cn/t3/platform/js/api/wb.js" charset="utf-8" ></script>


<script type="text/javascript">
WB.core.load(['connect', 'client'], function() {
    var cfg = {
        key: 'APP_KEY',
        xdpath: 'Ë∑®ÂüüÊñá‰ª∂url(http://yourdomain.com/xd.html)'
    };
    WB.connect.init(cfg);
    WB.client.init(cfg);
});

login=()=>{
 //   WB.connect.login(console.log);
 //   WB.connect.logout(console.log);
      WB.connect.checkLogin();
}

//https://open.weibo.com/wiki/Weibo-JS
</script>

</html>
